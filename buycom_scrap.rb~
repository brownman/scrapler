require 'rubygems'
require 'nokogiri'
require 'open-uri'

def buycomwallmart_scrap(scr)
  product = scr
  url = "http://www.buy.com/retail/usersearchresults.asp?querytype=home&qu=#{product}&qxt=home&display=col"
  doc = Nokogiri::HTML(open(url))

  puts url
  doc.css(".item").each do |item|
    text = item.at_css(".prodLink").text
    price = item.at_css(".PriceXLBold, .PriceCompare .BodyS").text[/\$[0-9\.]+/]
    puts "#{text} - #{price}"
  end
end
